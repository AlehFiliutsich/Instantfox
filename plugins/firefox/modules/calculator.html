<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
		<title>InstantFox</title>
		<style type="text/css">
html, body {
  height: 100%;
  width: 100%;
  background: #fff;
  font-family: "Helvetica Neue", Arial, Helvetica, sans-serif;
  margin: 0;
}

#container {
  height: 100%;
  width: 100%;
  position: fixed;
  top: 0;
  left: 0;
}

#container iframe {
  width: 100%;
  height: 100%;
  border: 0;
}

#container .env {
  margin: 40px auto;
  padding: 25px;
  max-width: 800px;
  background: #d8f2ff;
  border: 5px solid #eef9ff;
  border-radius: 10px;
  -moz-border-radius: 10px;
  -moz-box-shadow: 0 0 40px #37a0d3;
}

.calculator {
  text-align: center;
  font-size: 300%;
  color: #777;
}
.calculator .result {
  color: #000;
  font-weight: bold;
}

.weather {
  clear: both;
  margin-bottom: 10px;
  padding-bottom: 10px;
  border-bottom: 1px solid #ccc;
}

.weather .icon {
  float: left;
  margin-top: 3px;
  margin-right: 10px;
  margin-bottom: 20px;
}

.weather .day {
  font-weight: bold;
}

h1.ccity {
  font-size: 120%;
  font-weight: bold;
  margin-bottom: 20px;
}
		</style>
    </head>
 
	<body>
		<div id="container"></div>
	</body>
  	<script type='text/javascript'>
function setTitle(x)window.title=x
function $(id)document.getElementById(id)
function setContent(h)$('container').innerHTML=h

calculator = {
  // Accepted Chars
  scope: "0123456789.+-*/%(, )",
  
  script: function(query) {
	var ret = this.parse(query);
	var url = "http://search.instantfox.net/#c "+ret;
	if (ret) {
	  try {
		// .. Calculate ..
		var vlr = eval('('+ret+')').toString();
		if (vlr != ret) {
		  setContent('<div class="env calculator">'+ret+' = <span class="result">'+vlr+'</span></div>');
		  setTitle(ret+' = '+vlr);
		}
	  } catch(ex) {}
	}
	
	return { loc: url, id: 'calculator' };
  },

  parse: function(vlr){
	try {
	  if (vlr.length>0) {
		for(var i=0;i<vlr.length;i++) {
		  if (this.scope.indexOf(vlr.charAt(i)) < 0) {
			setContent('<div class="env calculator">Unkown operation.<br />Available operators: '+this.scope+'</div>');
			return null;
		  }
		};
		return vlr;
	  }
	} catch(ex) {
      setContent('<div class="env calculator">Unkown operation.:(</div>');

	  return null;
	}
  }
}
window.onhashchange=function(){
	calculator.script(location.hash.substr(1))
}
window.onhashchange()

	</script>
</html>