<?xml version="1.0" encoding="UTF-8"?>

<bindings xmlns="http://www.mozilla.org/xbl"
          xmlns:html="http://www.w3.org/1999/xhtml"
          xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
          xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="urlbar" extends="chrome://browser/content/urlbarBindings.xml#urlbar">
    <content sizetopopup="pref">
      <xul:hbox class="autocomplete-textbox-container urlbar-textbox-container" flex="1">
        <xul:stack flex="1">
          <children includes="progressmeter"/>
          <xul:hbox class="autocomplete-textbox-container-fission">
        <xul:hbox class="textbox-icon-box"
                  onmouseover="gURLBar._iconWasHovered = true;">
          <children includes="image|deck|stack|box">
            <xul:image class="autocomplete-icon" allowevents="true"/>
          </children>
        </xul:hbox>

        <xul:stack flex="1" anonid="textbox-input-box" class="textbox-input-box urlbar-input-box">
		  <xul:hbox class="textbox-input-box urlbar-input-box">
			  <xul:label anonid="instantFoxSpacer" class="instantfox-spacer urlbar-input textbox-input uri-element-right-align"/>		
			  <xul:label anonid="instantFoxShaddow"
						flex="1"
						onmousedown="gURLBar.focus();"
						ondragover="nsDragAndDrop.dragOver(event, gURLBar);"
						ondragdrop="nsDragAndDrop.drop(event, gURLBar);"
						ondragexit="nsDragAndDrop.dragExit(event, gURLBar);"
						class="instantfox-shaddow urlbar-input textbox-input uri-element-right-align" />
		  </xul:hbox>		
		  <xul:hbox anonid="textbox-input-box-inner" xbl:inherits="tooltiptext=inputtooltiptext"
                    flex="1" align="center">
            <children/>
            <html:input anonid="input" class="autocomplete-textbox urlbar-input textbox-input uri-element-right-align"
                        flex="1" allowevents="true"
                        xbl:inherits="tooltiptext=inputtooltiptext,onfocus,onblur,value,type,maxlength,disabled,size,readonly,placeholder,userAction"/>
		  </xul:hbox>
        </xul:stack>

        <children includes="hbox"/>
          </xul:hbox>
        </xul:stack>
      </xul:hbox>

      <xul:dropmarker anonid="historydropmarker"
                      class="autocomplete-history-dropmarker urlbar-history-dropmarker"
                      allowevents="true"
                      xbl:inherits="open,enablehistory,parentfocused=focused"/>

      <children includes="toolbarbutton"/>

      <xul:popupset anonid="popupset" class="autocomplete-result-popupset"/>
    </content>

    <implementation implements="nsIDOMEventListener, nsIObserver">

      <field name="uri"/>
      <field name="_focused"/>
      <field name="_mouseover"/>
      <field name="_iconWasHovered"/>
      <field name="_tooltipTimer"/>
	  
      <field name="inputBox">
        document.getAnonymousElementByAttribute(this, "anonid", "textbox-input-box");
      </field>
      <field name="inputBoxInner">
        document.getAnonymousElementByAttribute(this, "anonid", "textbox-input-box-inner");
      </field>
	  
	  <field name="instantFoxShaddowNode">
        document.getAnonymousElementByAttribute(this, "anonid", "instantFoxShaddow");
      </field>  
	  <field name="instantFoxSpacerNode">
        document.getAnonymousElementByAttribute(this, "anonid", "instantFoxSpacer");
      </field>  

	  <method name="InsertShaddowLink">
        <parameter name="aURL"/>
        <body><![CDATA[
			//if(aURL){
			this.instantFoxShaddowNode.value = aURL;
			//}
        ]]></body>
      </method> 
	  <method name="InsertSpacerLink">
        <parameter name="aURL"/>
        <body><![CDATA[
			if(aURL){
				this.instantFoxSpacerNode.value = aURL;
			}
        ]]></body>
      </method> 
	       
    </implementation>

  </binding>


</bindings>